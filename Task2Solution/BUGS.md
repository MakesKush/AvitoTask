# BUGS

Список найденных дефектов по результатам тестирования API сервисa объявлений
`https://qa-internship.avito.com`.

Формат описания:
- ID
- Заголовок
- Связанные тест-кейсы
- Предусловия
- Шаги воспроизведения
- Ожидаемый результат
- Фактический результат
- Severity (важность/критичность)

---

## BUG-01 — Создание объявления с отрицательным `sellerID` проходит успешно

**Связанные тест-кейсы:** TC-POST-04  

**Предусловия:**  
Сервис доступен по адресу `https://qa-internship.avito.com`.

**Шаги:**
1. Отправить запрос:
   ```http
   POST /api/1/item
   Content-Type: application/json
   ```
   С телом:
   ```json
   {
     "sellerID": -123456,
     "name": "Negative seller",
     "price": 400,
     "statistics": {
       "likes": 1,
       "viewCount": 1,
       "contacts": 1
     }
   }
   ```

**Ожидаемый результат:**
- Ответ `400 Bad Request`.
- В теле указана ошибка валидации поля `sellerID` (идентификатор продавца не может быть отрицательным).

**Фактический результат:**
- Ответ `200 OK`.
- В теле `status = "ok"`, объявление создаётся.

**Severity:** High  
**Комментарий:** В систему попадают объявления с некорректным идентификатором продавца. Такие данные ломают аналитику и дальнейшую обработку.

---

## BUG-02 — Создание объявления с отрицательной ценой (`price < 0`) разрешено

**Связанные тест-кейсы:** TC-POST-10  

**Предусловия:**  
Сервис доступен.

**Шаги:**
1. Отправить запрос:
   ```http
   POST /api/1/item
   Content-Type: application/json
   ```
   Тело:
   ```json
   {
     "sellerID": 444444,
     "name": "Negative price",
     "price": -10,
     "statistics": {
       "likes": 1,
       "viewCount": 1,
       "contacts": 1
     }
   }
   ```

**Ожидаемый результат:**
- Ответ `400 Bad Request`.
- В теле ошибка валидации поля `price` (значение должно быть больше 0).

**Фактический результат:**
- Ответ `200 OK`.
- В теле `status = "ok"`, объявление создаётся.

**Severity:** High  
**Комментарий:** Возможны некорректные финансовые расчёты, отчёты и отображение цены на клиенте.

---

## BUG-03 — Отрицательные значения статистики (`likes`, `viewCount`, `contacts`) проходят валидацию

**Связанные тест-кейсы:** TC-POST-16, TC-POST-20, TC-POST-24  

**Предусловия:**  
Сервис доступен.

**Шаги (пример для всех трёх полей сразу):**
1. Отправить запрос:
   ```http
   POST /api/1/item
   Content-Type: application/json
   ```
   Тело:
   ```json
   {
     "sellerID": 555555,
     "name": "Negative stats",
     "price": 1000,
     "statistics": {
       "likes": -1,
       "viewCount": -1,
       "contacts": -1
     }
   }
   ```

**Ожидаемый результат:**
- Ответ `400 Bad Request`.
- В теле указаны ошибки валидации полей статистики (значения не могут быть отрицательными).

**Фактический результат:**
- Ответ `200 OK`.
- В теле `status = "ok"`, объявление создаётся с отрицательными значениями статистики.

**Severity:** Medium  
**Комментарий:** Ломает логику подсчёта просмотров/лайков/контактов, приводит к некорректным отчётам и дашбордам, но не влияет напрямую на безопасность или оплату.

---

## BUG-04 — Запрос списка объявлений продавца с отрицательным `sellerID` возвращает 200 вместо ошибки

**Связанные тест-кейсы:** TC-GET-SELLER-02  

**Предусловия:**  
Сервис доступен.

**Шаги:**
1. Отправить запрос:
   ```http
   GET /api/1/-222222/item
   ```

**Ожидаемый результат:**
- Ответ `400 Bad Request` (некорректный идентификатор продавца).

**Фактический результат:**
- Ответ `200 OK`.
- В теле `status = "ok"`, массив объявлений пустой.

**Severity:** Medium  
**Комментарий:** Клиент получает успешный ответ вместо явной ошибки валидации. Это затрудняет отладку и может маскировать проблемы с некорректными параметрами на стороне клиента.

---

## BUG-05 — Неявное поведение для статистики несуществующего объявления

**Связанные тест-кейсы:** TC-GET-STAT-03  

**Предусловия:**  
Сервис доступен.

**Шаги:**
1. Вызвать метод статистики для заведомо несуществующего `itemId`:
   ```http
   GET /api/1/statistic/{randomNonExistingId}
   ```

**Ожидаемый результат:**
- Чётко задокументированное поведение (чаще всего — `404 Not Found`).

**Фактический результат:**
- В отдельных запусках наблюдается `404 Not Found`, однако формата и содержимого ошибки в спецификации нет, поведение не описано.

**Severity:** Low  
**Комментарий:** Низкая критичность, функциональность не ломается, но поведение требует уточнения/фиксации в спецификации и логов ошибок.
